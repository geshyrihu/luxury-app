import{b as ae,e as Ve,f as le}from"./chunk-NGTLZQLD.js";import{a as Me,b as Pe}from"./chunk-ER76SXMX.js";import{b as u}from"./chunk-MZBZ45EI.js";import{A as Te,B as Se,E as Le,F as re,b as ne,c as se,e as O,g as D,r as I,s as Ee,t as oe}from"./chunk-MIEORJZ2.js";import{q as Ce,r as we,t as ie}from"./chunk-FQKZZ3J4.js";import{B as ve,D as B,d as Y,l as J,n as be,o as ee,s as te,t as ye}from"./chunk-RBLK56XA.js";import{Cb as fe,Db as h,Ec as F,Fc as z,Gc as xe,Hc as K,Ia as pe,Ib as g,Ic as X,Jb as x,Kb as C,Lb as P,Mb as V,Ob as k,Ya as N,Za as _e,Zb as S,_b as o,aa as me,ab as Z,cb as j,da as ue,dc as R,eb as M,ec as A,fc as U,gc as W,jb as c,kb as f,la as G,ma as de,mb as Q,ob as he,pb as v,pc as $,qa as d,qc as H,ra as p,rc as ge,ub as _,vb as r,yb as Ie,zb as q}from"./chunk-3JZBD3P2.js";import{a as E,b as T}from"./chunk-G2X5OL7Z.js";var Ae=["sublist"];function Fe(n,l){if(n&1&&C(0,"li",6),n&2){let e=o().$implicit,t=o(2);Ie(t.getItemProp(e,"style")),r("ngClass",t.getSeparatorItemClass(e)),_("id",t.getItemId(e))("data-pc-section","separator")}}function Ke(n,l){if(n&1&&C(0,"span",19),n&2){let e=o(4).$implicit,t=o(2);r("ngClass",t.getItemProp(e,"icon"))("ngStyle",t.getItemProp(e,"iconStyle")),_("data-pc-section","icon")("aria-hidden",!0)("tabindex",-1)}}function Oe(n,l){if(n&1&&(g(0,"span",20),A(1),x()),n&2){let e=o(4).$implicit,t=o(2);_("data-pc-section","label"),c(1),W(" ",t.getItemLabel(e)," ")}}function De(n,l){if(n&1&&C(0,"span",21),n&2){let e=o(4).$implicit,t=o(2);r("innerHTML",t.getItemLabel(e),N),_("data-pc-section","label")}}function Re(n,l){if(n&1&&(g(0,"span",22),A(1),x()),n&2){let e=o(4).$implicit,t=o(2);r("ngClass",t.getItemProp(e,"badgeStyleClass")),c(1),U(t.getItemProp(e,"badge"))}}function $e(n,l){n&1&&C(0,"AngleRightIcon",25),n&2&&(r("styleClass","p-submenu-icon"),_("data-pc-section","submenuicon")("aria-hidden",!0))}function He(n,l){}function ze(n,l){n&1&&h(0,He,0,0,"ng-template"),n&2&&r("data-pc-section","submenuicon")("aria-hidden",!0)}function Be(n,l){if(n&1&&(P(0),h(1,$e,1,3,"AngleRightIcon",23)(2,ze,1,2,null,24),V()),n&2){let e=o(6);c(1),r("ngIf",!e.contextMenu.submenuIconTemplate),c(1),r("ngTemplateOutlet",e.contextMenu.submenuIconTemplate)}}var ke=n=>({"p-menuitem-link":!0,"p-disabled":n});function Ge(n,l){if(n&1&&(g(0,"a",14),h(1,Ke,1,5,"span",15)(2,Oe,2,2,"span",16)(3,De,1,2,"ng-template",null,17,X)(5,Re,2,2,"span",18)(6,Be,3,2,"ng-container",10),x()),n&2){let e=R(4),t=o(3).$implicit,i=o(2);r("target",i.getItemProp(t,"target"))("ngClass",H(12,ke,i.getItemProp(t,"disabled"))),_("href",i.getItemProp(t,"url"),_e)("aria-hidden",!0)("data-automationid",i.getItemProp(t,"automationId"))("data-pc-section","action")("tabindex",-1),c(1),r("ngIf",i.getItemProp(t,"icon")),c(1),r("ngIf",i.getItemProp(t,"escape"))("ngIfElse",e),c(3),r("ngIf",i.getItemProp(t,"badge")),c(1),r("ngIf",i.isItemGroup(t))}}function Ne(n,l){if(n&1&&C(0,"span",19),n&2){let e=o(4).$implicit,t=o(2);r("ngClass",t.getItemProp(e,"icon"))("ngStyle",t.getItemProp(e,"iconStyle")),_("data-pc-section","icon")("aria-hidden",!0)("tabindex",-1)}}function Ze(n,l){if(n&1&&(g(0,"span",20),A(1),x()),n&2){let e=o(4).$implicit,t=o(2);_("data-pc-section","label"),c(1),W(" ",t.getItemLabel(e)," ")}}function je(n,l){if(n&1&&C(0,"span",21),n&2){let e=o(4).$implicit,t=o(2);r("innerHTML",t.getItemLabel(e),N),_("data-pc-section","label")}}function Qe(n,l){if(n&1&&(g(0,"span",22),A(1),x()),n&2){let e=o(4).$implicit,t=o(2);r("ngClass",t.getItemProp(e,"badgeStyleClass")),c(1),U(t.getItemProp(e,"badge"))}}function qe(n,l){n&1&&C(0,"AngleRightIcon",25),n&2&&(r("styleClass","p-submenu-icon"),_("data-pc-section","submenuicon")("aria-hidden",!0))}function Ue(n,l){}function We(n,l){n&1&&h(0,Ue,0,0,"ng-template"),n&2&&r("data-pc-section","submenuicon")("aria-hidden",!0)}function Xe(n,l){if(n&1&&(P(0),h(1,qe,1,3,"AngleRightIcon",23)(2,We,1,2,null,24),V()),n&2){let e=o(6);c(1),r("ngIf",!e.contextMenu.submenuIconTemplate),c(1),r("ngTemplateOutlet",e.contextMenu.submenuIconTemplate)}}var Ye=()=>({exact:!1});function Je(n,l){if(n&1&&(g(0,"a",26),h(1,Ne,1,5,"span",15)(2,Ze,2,2,"span",16)(3,je,1,2,"ng-template",null,17,X)(5,Qe,2,2,"span",18)(6,Xe,3,2,"ng-container",10),x()),n&2){let e=R(4),t=o(3).$implicit,i=o(2);r("routerLink",i.getItemProp(t,"routerLink"))("queryParams",i.getItemProp(t,"queryParams"))("routerLinkActive","p-menuitem-link-active")("routerLinkActiveOptions",i.getItemProp(t,"routerLinkActiveOptions")||$(21,Ye))("target",i.getItemProp(t,"target"))("ngClass",H(22,ke,i.getItemProp(t,"disabled")))("fragment",i.getItemProp(t,"fragment"))("queryParamsHandling",i.getItemProp(t,"queryParamsHandling"))("preserveFragment",i.getItemProp(t,"preserveFragment"))("skipLocationChange",i.getItemProp(t,"skipLocationChange"))("replaceUrl",i.getItemProp(t,"replaceUrl"))("state",i.getItemProp(t,"state")),_("data-automationid",i.getItemProp(t,"automationId"))("tabindex",-1)("aria-hidden",!0)("data-pc-section","action"),c(1),r("ngIf",i.getItemProp(t,"icon")),c(1),r("ngIf",i.getItemProp(t,"escape"))("ngIfElse",e),c(3),r("ngIf",i.getItemProp(t,"badge")),c(1),r("ngIf",i.isItemGroup(t))}}function et(n,l){if(n&1&&(P(0),h(1,Ge,7,14,"a",12)(2,Je,7,24,"a",13),V()),n&2){let e=o(2).$implicit,t=o(2);c(1),r("ngIf",!t.getItemProp(e,"routerLink")),c(1),r("ngIf",t.getItemProp(e,"routerLink"))}}function tt(n,l){}function it(n,l){n&1&&h(0,tt,0,0,"ng-template")}var nt=n=>({$implicit:n});function st(n,l){if(n&1&&(P(0),h(1,it,1,0,null,27),V()),n&2){let e=o(2).$implicit,t=o(2);c(1),r("ngTemplateOutlet",t.itemTemplate)("ngTemplateOutletContext",H(2,nt,e.item))}}function ot(n,l){if(n&1){let e=k();g(0,"p-contextMenuSub",28),S("itemClick",function(i){d(e);let s=o(4);return p(s.itemClick.emit(i))})("itemMouseEnter",function(i){d(e);let s=o(4);return p(s.onItemMouseEnter(i))}),x()}if(n&2){let e=o(2).$implicit,t=o(2);r("items",e.items)("itemTemplate",t.itemTemplate)("menuId",t.menuId)("visible",t.isItemActive(e)&&t.isItemGroup(e))("activeItemPath",t.activeItemPath)("focusedItemId",t.focusedItemId)("level",t.level+1)}}function rt(n,l){if(n&1){let e=k();g(0,"li",7,8)(2,"div",9),S("click",function(i){d(e);let s=o().$implicit,a=o(2);return p(a.onItemClick(i,s))})("mouseenter",function(i){d(e);let s=o().$implicit,a=o(2);return p(a.onItemMouseEnter({$event:i,processedItem:s}))}),h(3,et,3,2,"ng-container",10)(4,st,2,4,"ng-container",10),x(),h(5,ot,1,7,"p-contextMenuSub",11),x()}if(n&2){let e=o(),t=e.$implicit,i=e.index,s=o(2);q(s.getItemProp(t,"styleClass")),r("ngStyle",s.getItemProp(t,"style"))("ngClass",s.getItemClass(t))("tooltipOptions",s.getItemProp(t,"tooltipOptions")),_("id",s.getItemId(t))("data-pc-section","menuitem")("data-p-highlight",s.isItemActive(t))("data-p-focused",s.isItemFocused(t))("data-p-disabled",s.isItemDisabled(t))("aria-label",s.getItemLabel(t))("aria-disabled",s.isItemDisabled(t)||void 0)("aria-haspopup",s.isItemGroup(t)&&!s.getItemProp(t,"to")?"menu":void 0)("aria-expanded",s.isItemGroup(t)?s.isItemActive(t):void 0)("aria-level",s.level+1)("aria-setsize",s.getAriaSetSize())("aria-posinset",s.getAriaPosInset(i)),c(2),_("data-pc-section","content"),c(1),r("ngIf",!s.itemTemplate),c(1),r("ngIf",s.itemTemplate),c(1),r("ngIf",s.isItemVisible(t)&&s.isItemGroup(t))}}function at(n,l){if(n&1&&h(0,Fe,1,5,"li",4)(1,rt,6,21,"li",5),n&2){let e=l.$implicit,t=o(2);r("ngIf",t.isItemVisible(e)&&t.getItemProp(e,"separator")),c(1),r("ngIf",t.isItemVisible(e)&&!t.getItemProp(e,"separator"))}}var lt=(n,l)=>({"p-submenu-list":n,"p-contextmenu-root-list":l});function ct(n,l){if(n&1){let e=k();g(0,"ul",1,2),S("@overlayAnimation.start",function(i){d(e);let s=R(1),a=o();return p(a.onEnter(i,s))})("keydown",function(i){d(e);let s=o();return p(s.menuKeydown.emit(i))})("focus",function(i){d(e);let s=o();return p(s.menuFocus.emit(i))})("blur",function(i){d(e);let s=o();return p(s.menuBlur.emit(i))}),h(2,at,2,2,"ng-template",3),x()}if(n&2){let e=o();r("ngClass",ge(10,lt,!e.root,e.root))("@overlayAnimation",e.visible)("tabindex",e.tabindex),_("id",e.menuId+"_list")("aria-label",e.ariaLabel)("aria-labelledBy",e.ariaLabelledBy)("aria-activedescendant",e.focusedItemId)("aria-orientation","vertical")("data-pc-section","menu"),c(2),r("ngForOf",e.items)}}var mt=["rootmenu"],ut=["container"],dt=()=>({"p-contextmenu p-component":!0,"p-contextmenu-overlay":!0}),pt=()=>({value:"visible"});function _t(n,l){if(n&1){let e=k();g(0,"div",1,2),S("@overlayAnimation.start",function(i){d(e);let s=o();return p(s.onOverlayAnimationStart(i))})("@overlayAnimation.done",function(i){d(e);let s=o();return p(s.onOverlayAnimationEnd(i))}),g(2,"p-contextMenuSub",3,4),S("itemClick",function(i){d(e);let s=o();return p(s.onItemClick(i))})("menuFocus",function(i){d(e);let s=o();return p(s.onMenuFocus(i))})("menuBlur",function(i){d(e);let s=o();return p(s.onMenuBlur(i))})("menuKeydown",function(i){d(e);let s=o();return p(s.onKeyDown(i))})("itemMouseEnter",function(i){d(e);let s=o();return p(s.onItemMouseEnter(i))}),x()()}if(n&2){let e=o();q(e.styleClass),r("ngClass",$(20,dt))("ngStyle",e.style)("@overlayAnimation",$(21,pt)),_("data-pc-section","root")("data-pc-name","contextmenu")("id",e.id),c(2),r("root",!0)("items",e.processedItems)("itemTemplate",e.itemTemplate)("menuId",e.id)("tabindex",e.disabled?-1:e.tabindex)("ariaLabel",e.ariaLabel)("ariaLabelledBy",e.ariaLabelledBy)("baseZIndex",e.baseZIndex)("autoZIndex",e.autoZIndex)("visible",e.submenuVisible())("focusedItemId",e.focused?e.focusedItemId:void 0)("activeItemPath",e.activeItemPath())}}var ht=(()=>{class n{document;el;renderer;cd;contextMenu;ref;visible=!1;items;itemTemplate;root=!1;autoZIndex=!0;baseZIndex=0;popup;menuId;ariaLabel;ariaLabelledBy;level=0;focusedItemId;activeItemPath;tabindex=0;itemClick=new v;itemMouseEnter=new v;menuFocus=new v;menuBlur=new v;menuKeydown=new v;sublistViewChild;constructor(e,t,i,s,a,m){this.document=e,this.el=t,this.renderer=i,this.cd=s,this.contextMenu=a,this.ref=m}getItemProp(e,t,i=null){return e&&e.item?I.getItemValue(e.item[t],i):void 0}getItemId(e){return e.item&&e.item?.id?e.item.id:`${this.menuId}_${e.key}`}getItemKey(e){return this.getItemId(e)}getItemClass(e){return T(E({},this.getItemProp(e,"class")),{"p-menuitem":!0,"p-highlight":this.isItemActive(e),"p-menuitem-active":this.isItemActive(e),"p-focus":this.isItemFocused(e),"p-disabled":this.isItemDisabled(e)})}getItemLabel(e){return this.getItemProp(e,"label")}getSeparatorItemClass(e){return T(E({},this.getItemProp(e,"class")),{"p-menuitem-separator":!0})}getAriaSetSize(){return this.items.filter(e=>this.isItemVisible(e)&&!this.getItemProp(e,"separator")).length}getAriaPosInset(e){return e-this.items.slice(0,e).filter(t=>this.isItemVisible(t)&&this.getItemProp(t,"separator")).length+1}isItemVisible(e){return this.getItemProp(e,"visible")!==!1}isItemActive(e){if(this.activeItemPath)return this.activeItemPath.some(t=>t.key===e.key)}isItemDisabled(e){return this.getItemProp(e,"disabled")}isItemFocused(e){return this.focusedItemId===this.getItemId(e)}isItemGroup(e){return I.isNotEmpty(e.items)}onItemMouseEnter(e){let{event:t,processedItem:i}=e;this.itemMouseEnter.emit({originalEvent:t,processedItem:i})}onItemClick(e,t){this.getItemProp(t,"command",{originalEvent:e,item:t.item}),this.itemClick.emit({originalEvent:e,processedItem:t,isFocus:!0})}onEnter(e,t){if(e.fromState==="void"&&e.toState){let i=e.element;this.position(i)}}position(e){let t=e.parentElement.parentElement,i=u.getOffset(e.parentElement.parentElement),s=u.getViewport(),a=e.offsetParent?e.offsetWidth:u.getHiddenElementOuterWidth(e),m=u.getOuterWidth(t.children[0]);e.style.top="0px",parseInt(i.left,10)+m+a>s.width-u.calculateScrollbarWidth()?e.style.left=-1*a+"px":e.style.left=m+"px"}static \u0275fac=function(t){return new(t||n)(f(Y),f(Z),f(j),f(Q),f(me(()=>It)),f(fe))};static \u0275cmp=G({type:n,selectors:[["p-contextMenuSub"]],viewQuery:function(t,i){if(t&1&&z(Ae,5),t&2){let s;F(s=K())&&(i.sublistViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{visible:"visible",items:"items",itemTemplate:"itemTemplate",root:"root",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",popup:"popup",menuId:"menuId",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",level:"level",focusedItemId:"focusedItemId",activeItemPath:"activeItemPath",tabindex:"tabindex"},outputs:{itemClick:"itemClick",itemMouseEnter:"itemMouseEnter",menuFocus:"menuFocus",menuBlur:"menuBlur",menuKeydown:"menuKeydown"},decls:1,vars:1,consts:[["role","menu",3,"ngClass","tabindex","keydown","focus","blur",4,"ngIf"],["role","menu",3,"ngClass","tabindex","keydown","focus","blur"],["sublist",""],["ngFor","",3,"ngForOf"],["role","separator",3,"style","ngClass",4,"ngIf"],["role","menuitem","pTooltip","",3,"ngStyle","ngClass","class","tooltipOptions",4,"ngIf"],["role","separator",3,"ngClass"],["role","menuitem","pTooltip","",3,"ngStyle","ngClass","tooltipOptions"],["listItem",""],[1,"p-menuitem-content",3,"click","mouseenter"],[4,"ngIf"],[3,"items","itemTemplate","menuId","visible","activeItemPath","focusedItemId","level","itemClick","itemMouseEnter",4,"ngIf"],["pRipple","",3,"target","ngClass",4,"ngIf"],["pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state",4,"ngIf"],["pRipple","",3,"target","ngClass"],["class","p-menuitem-icon",3,"ngClass","ngStyle",4,"ngIf"],["class","p-menuitem-text",4,"ngIf","ngIfElse"],["htmlLabel",""],["class","p-menuitem-badge",3,"ngClass",4,"ngIf"],[1,"p-menuitem-icon",3,"ngClass","ngStyle"],[1,"p-menuitem-text"],[1,"p-menuitem-text",3,"innerHTML"],[1,"p-menuitem-badge",3,"ngClass"],[3,"styleClass",4,"ngIf"],[4,"ngTemplateOutlet"],[3,"styleClass"],["pRipple","",3,"routerLink","queryParams","routerLinkActive","routerLinkActiveOptions","target","ngClass","fragment","queryParamsHandling","preserveFragment","skipLocationChange","replaceUrl","state"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"items","itemTemplate","menuId","visible","activeItemPath","focusedItemId","level","itemClick","itemMouseEnter"]],template:function(t,i){t&1&&h(0,ct,3,13,"ul",0),t&2&&r("ngIf",i.root?!0:i.visible)},dependencies:()=>[J,be,ee,ye,te,Ce,we,Me,Ve,ae,n],encapsulation:2,data:{animation:[ne("overlayAnimation",[D(":enter",[O({opacity:0})]),D(":leave",[O({opacity:0})])])]}})}return n})(),It=(()=>{class n{document;platformId;el;renderer;cd;config;overlayService;set model(e){this._model=e,this._processedItems=this.createProcessedItems(this._model||[])}get model(){return this._model}triggerEvent="contextmenu";target;global;style;styleClass;appendTo;autoZIndex=!0;baseZIndex=0;id;ariaLabel;ariaLabelledBy;pressDelay=500;onShow=new v;onHide=new v;templates;rootmenu;containerViewChild;submenuIconTemplate;itemTemplate;container;outsideClickListener;resizeListener;triggerEventListener;documentClickListener;documentTriggerListener;touchEndListener;pageX;pageY;visible=M(!1);relativeAlign;window;focused=!1;activeItemPath=M([]);focusedItemInfo=M({index:-1,level:0,parentKey:"",item:null});submenuVisible=M(!1);searchValue="";searchTimeout;_processedItems;_model;pressTimer;get visibleItems(){let e=this.activeItemPath().find(t=>t.key===this.focusedItemInfo().parentKey);return e?e.items:this.processedItems}get processedItems(){return(!this._processedItems||!this._processedItems.length)&&(this._processedItems=this.createProcessedItems(this.model||[])),this._processedItems}get focusedItemId(){let e=this.focusedItemInfo();return e.item&&e.item?.id?e.item.id:e.index!==-1?`${this.id}${I.isNotEmpty(e.parentKey)?"_"+e.parentKey:""}_${e.index}`:null}constructor(e,t,i,s,a,m,b){this.document=e,this.platformId=t,this.el=i,this.renderer=s,this.cd=a,this.config=m,this.overlayService=b,this.window=this.document.defaultView,he(()=>{let y=this.activeItemPath();I.isNotEmpty(y)?this.bindGlobalListeners():this.visible()||this.unbindGlobalListeners()})}ngOnInit(){this.id=this.id||Ee(),this.bindTriggerEventListener()}isMobile(){return u.isIOS()||u.isAndroid()}bindTriggerEventListener(){B(this.platformId)&&(this.triggerEventListener||(this.isMobile()?this.global?(this.triggerEventListener=this.renderer.listen(this.document,"touchstart",this.onTouchStart.bind(this)),this.touchEndListener=this.renderer.listen(this.document,"touchend",this.onTouchEnd.bind(this))):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,"touchstart",this.onTouchStart.bind(this)),this.touchEndListener=this.renderer.listen(this.target,"touchend",this.onTouchEnd.bind(this))):this.global?this.triggerEventListener=this.renderer.listen(this.document,this.triggerEvent,e=>{this.show(e)}):this.target&&(this.triggerEventListener=this.renderer.listen(this.target,this.triggerEvent,e=>{this.show(e)}))))}bindGlobalListeners(){if(B(this.platformId)){if(!this.documentClickListener){let e=this.el?this.el.nativeElement.ownerDocument:"document";this.documentClickListener=this.renderer.listen(e,"click",t=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(t)&&!t.ctrlKey&&t.button!==2&&this.triggerEvent!=="click"&&this.hide()}),this.documentTriggerListener=this.renderer.listen(e,this.triggerEvent,t=>{this.containerViewChild.nativeElement.offsetParent&&this.isOutsideClicked(t)&&this.hide()})}this.resizeListener||(this.resizeListener=this.renderer.listen(this.document.defaultView,"resize",e=>{this.hide()}))}}ngAfterContentInit(){this.templates?.forEach(e=>{switch(e.getType()){case"submenuicon":this.submenuIconTemplate=e.template;break;case"item":this.itemTemplate=e.template;break;default:this.itemTemplate=e.template;break}})}createProcessedItems(e,t=0,i={},s=""){let a=[];return e&&e.forEach((m,b)=>{let y=(s!==""?s+"_":"")+b,w={item:m,index:b,level:t,key:y,parent:i,parentKey:s};w.items=this.createProcessedItems(m.items,t+1,w,y),a.push(w)}),a}getItemProp(e,t){return e?I.getItemValue(e[t]):void 0}getProccessedItemLabel(e){return e?this.getItemLabel(e.item):void 0}getItemLabel(e){return this.getItemProp(e,"label")}isProcessedItemGroup(e){return e&&I.isNotEmpty(e.items)}isSelected(e){return this.activeItemPath().some(t=>t.key===e.key)}isValidSelectedItem(e){return this.isValidItem(e)&&this.isSelected(e)}isValidItem(e){return!!e&&!this.isItemDisabled(e.item)&&!this.isItemSeparator(e.item)}isItemDisabled(e){return this.getItemProp(e,"disabled")}isItemSeparator(e){return this.getItemProp(e,"separator")}isItemMatched(e){return this.isValidItem(e)&&this.getProccessedItemLabel(e).toLocaleLowerCase().startsWith(this.searchValue.toLocaleLowerCase())}isProccessedItemGroup(e){return e&&I.isNotEmpty(e.items)}onItemClick(e){let{processedItem:t}=e,i=this.isProcessedItemGroup(t);if(this.isSelected(t)){let{index:a,key:m,level:b,parentKey:y,item:w}=t;this.activeItemPath.set(this.activeItemPath().filter(L=>m!==L.key&&m.startsWith(L.key))),this.focusedItemInfo.set({index:a,level:b,parentKey:y,item:w}),u.focus(this.rootmenu.sublistViewChild.nativeElement)}else i?this.onItemChange(e):this.hide()}onItemMouseEnter(e){this.onItemChange(e)}onKeyDown(e){let t=e.metaKey||e.ctrlKey;switch(e.code){case"ArrowDown":this.onArrowDownKey(e);break;case"ArrowUp":this.onArrowUpKey(e);break;case"ArrowLeft":this.onArrowLeftKey(e);break;case"ArrowRight":this.onArrowRightKey(e);break;case"Home":this.onHomeKey(e);break;case"End":this.onEndKey(e);break;case"Space":this.onSpaceKey(e);break;case"Enter":this.onEnterKey(e);break;case"Escape":this.onEscapeKey(e);break;case"Tab":this.onTabKey(e);break;case"PageDown":case"PageUp":case"Backspace":case"ShiftLeft":case"ShiftRight":break;default:!t&&I.isPrintableCharacter(e.key)&&this.searchItems(e,e.key);break}}onArrowDownKey(e){let t=this.focusedItemInfo().index!==-1?this.findNextItemIndex(this.focusedItemInfo().index):this.findFirstFocusedItemIndex();this.changeFocusedItemIndex(e,t),e.preventDefault()}onArrowRightKey(e){let t=this.visibleItems[this.focusedItemInfo().index];this.isProccessedItemGroup(t)&&(this.onItemChange({originalEvent:e,processedItem:t}),this.focusedItemInfo.set({index:-1,parentKey:t.key,item:t.item}),this.searchValue="",this.onArrowDownKey(e)),e.preventDefault()}onArrowUpKey(e){if(e.altKey){if(this.focusedItemInfo().index!==-1){let t=this.visibleItems[this.focusedItemInfo().index];!this.isProccessedItemGroup(t)&&this.onItemChange({originalEvent:e,processedItem:t})}this.hide(),e.preventDefault()}else{let t=this.focusedItemInfo().index!==-1?this.findPrevItemIndex(this.focusedItemInfo().index):this.findLastFocusedItemIndex();this.changeFocusedItemIndex(e,t),e.preventDefault()}}onArrowLeftKey(e){let t=this.visibleItems[this.focusedItemInfo().index],i=this.activeItemPath().find(m=>m.key===t.parentKey);I.isEmpty(t.parent)||(this.focusedItemInfo.set({index:-1,parentKey:i?i.parentKey:"",item:t.item}),this.searchValue="",this.onArrowDownKey(e));let a=this.activeItemPath().filter(m=>m.parentKey!==this.focusedItemInfo().parentKey);this.activeItemPath.set(a),e.preventDefault()}onHomeKey(e){this.changeFocusedItemIndex(e,this.findFirstItemIndex()),e.preventDefault()}onEndKey(e){this.changeFocusedItemIndex(e,this.findLastItemIndex()),e.preventDefault()}onSpaceKey(e){this.onEnterKey(e)}onEscapeKey(e){this.hide();let t=this.findVisibleItem(this.findFirstFocusedItemIndex()),i=this.focusedItemInfo();this.focusedItemInfo.set(T(E({},i),{index:this.findFirstFocusedItemIndex(),item:t.item})),e.preventDefault()}onTabKey(e){if(this.focusedItemInfo().index!==-1){let t=this.visibleItems[this.focusedItemInfo().index];!this.isProccessedItemGroup(t)&&this.onItemChange({originalEvent:e,processedItem:t})}this.hide()}onEnterKey(e){if(this.focusedItemInfo().index!==-1){let t=u.findSingle(this.rootmenu.el.nativeElement,`li[id="${`${this.focusedItemId}`}"]`),i=t&&u.findSingle(t,'a[data-pc-section="action"]');i?i.click():t&&t.click();let s=this.visibleItems[this.focusedItemInfo().index];if(!this.isProccessedItemGroup(s)){let m=this.focusedItemInfo();this.focusedItemInfo.set(T(E({},m),{index:this.findFirstFocusedItemIndex()}))}}e.preventDefault()}onItemChange(e){let{processedItem:t,isFocus:i}=e;if(I.isEmpty(t))return;let{index:s,key:a,level:m,parentKey:b,items:y}=t,w=I.isNotEmpty(y),L=this.activeItemPath().filter(ce=>ce.parentKey!==b&&ce.parentKey!==a);w&&(L.push(t),this.submenuVisible.set(!0)),this.focusedItemInfo.set({index:s,level:m,parentKey:b,item:t.item}),this.activeItemPath.set(L),i&&u.focus(this.rootmenu.sublistViewChild.nativeElement)}onMenuFocus(e){this.focused=!0;let t=this.focusedItemInfo().index!==-1?this.focusedItemInfo():{index:-1,level:0,parentKey:"",item:null};this.focusedItemInfo.set(t)}onMenuBlur(e){this.focused=!1,this.focusedItemInfo.set({index:-1,level:0,parentKey:"",item:null}),this.searchValue=""}onOverlayAnimationStart(e){switch(e.toState){case"visible":this.container=e.element,this.position(),this.moveOnTop(),this.appendOverlay(),this.bindGlobalListeners(),this.onShow.emit(),u.focus(this.rootmenu.sublistViewChild.nativeElement);break}}onOverlayAnimationEnd(e){switch(e.toState){case"void":this.onOverlayHide();break}}appendOverlay(){this.appendTo&&(this.appendTo==="body"?this.renderer.appendChild(this.document.body,this.containerViewChild.nativeElement):u.appendChild(this.containerViewChild.nativeElement,this.appendTo))}moveOnTop(){this.autoZIndex&&this.containerViewChild&&oe.set("menu",this.containerViewChild.nativeElement,this.baseZIndex+this.config.zIndex.menu)}onOverlayHide(){this.unbindGlobalListeners(),this.cd.destroyed||(this.target=null),this.container&&this.autoZIndex&&oe.clear(this.container),this.container=null,this.onHide.emit()}onTouchStart(e){this.pressTimer=setTimeout(()=>{this.show(e)},this.pressDelay)}onTouchEnd(){clearTimeout(this.pressTimer)}hide(){this.visible.set(!1),this.activeItemPath.set([]),this.focusedItemInfo.set({index:-1,level:0,parentKey:"",item:null})}toggle(e){this.visible()?this.hide():this.show(e)}show(e){this.activeItemPath.set([]),this.focusedItemInfo.set({index:-1,level:0,parentKey:"",item:null}),this.pageX=e.pageX,this.pageY=e.pageY,this.visible()?this.position():this.visible.set(!0),e.stopPropagation(),e.preventDefault()}position(){let e=this.pageX+1,t=this.pageY+1,i=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetWidth:u.getHiddenElementOuterWidth(this.containerViewChild.nativeElement),s=this.containerViewChild.nativeElement.offsetParent?this.containerViewChild.nativeElement.offsetHeight:u.getHiddenElementOuterHeight(this.containerViewChild.nativeElement),a=u.getViewport();e+i-this.document.scrollingElement.scrollLeft>a.width&&(e-=i),t+s-this.document.scrollingElement.scrollTop>a.height&&(t-=s),e<this.document.scrollingElement.scrollLeft&&(e=this.document.scrollingElement.scrollLeft),t<this.document.scrollingElement.scrollTop&&(t=this.document.scrollingElement.scrollTop),this.containerViewChild.nativeElement.style.left=e+"px",this.containerViewChild.nativeElement.style.top=t+"px"}searchItems(e,t){this.searchValue=(this.searchValue||"")+t;let i=-1,s=!1;return this.focusedItemInfo().index!==-1?(i=this.visibleItems.slice(this.focusedItemInfo().index).findIndex(a=>this.isItemMatched(a)),i=i===-1?this.visibleItems.slice(0,this.focusedItemInfo().index).findIndex(a=>this.isItemMatched(a)):i+this.focusedItemInfo().index):i=this.visibleItems.findIndex(a=>this.isItemMatched(a)),i!==-1&&(s=!0),i===-1&&this.focusedItemInfo().index===-1&&(i=this.findFirstFocusedItemIndex()),i!==-1&&this.changeFocusedItemIndex(e,i),this.searchTimeout&&clearTimeout(this.searchTimeout),this.searchTimeout=setTimeout(()=>{this.searchValue="",this.searchTimeout=null},500),s}findVisibleItem(e){return I.isNotEmpty(this.visibleItems)?this.visibleItems[e]:null}findLastFocusedItemIndex(){let e=this.findSelectedItemIndex();return e<0?this.findLastItemIndex():e}findLastItemIndex(){return I.findLastIndex(this.visibleItems,e=>this.isValidItem(e))}findPrevItemIndex(e){let t=e>0?I.findLastIndex(this.visibleItems.slice(0,e),i=>this.isValidItem(i)):-1;return t>-1?t:e}findNextItemIndex(e){let t=e<this.visibleItems.length-1?this.visibleItems.slice(e+1).findIndex(i=>this.isValidItem(i)):-1;return t>-1?t+e+1:e}findFirstFocusedItemIndex(){let e=this.findSelectedItemIndex();return e<0?this.findFirstItemIndex():e}findFirstItemIndex(){return this.visibleItems.findIndex(e=>this.isValidItem(e))}findSelectedItemIndex(){return this.visibleItems.findIndex(e=>this.isValidSelectedItem(e))}changeFocusedItemIndex(e,t){let i=this.findVisibleItem(t),s=this.focusedItemInfo();s.index!==t&&(this.focusedItemInfo.set(T(E({},s),{index:t,item:i.item})),this.scrollInView())}scrollInView(e=-1){let t=e!==-1?`${this.id}_${e}`:this.focusedItemId,i=u.findSingle(this.rootmenu.el.nativeElement,`li[id="${t}"]`);i&&i.scrollIntoView&&i.scrollIntoView({block:"nearest",inline:"nearest"})}bindResizeListener(){B(this.platformId)&&(this.resizeListener||(this.resizeListener=this.renderer.listen(this.document.defaultView,"resize",e=>{this.hide()})))}isOutsideClicked(e){return!(this.containerViewChild.nativeElement.isSameNode(e.target)||this.containerViewChild.nativeElement.contains(e.target))}unbindResizeListener(){this.resizeListener&&(this.resizeListener(),this.resizeListener=null)}unbindGlobalListeners(){this.documentClickListener&&(this.documentClickListener(),this.documentClickListener=null),this.documentTriggerListener&&(this.documentTriggerListener(),this.documentTriggerListener=null),this.resizeListener&&(this.resizeListener(),this.resizeListener=null),this.touchEndListener&&(this.touchEndListener(),this.touchEndListener=null)}unbindTriggerEventListener(){this.triggerEventListener&&(this.triggerEventListener(),this.triggerEventListener=null)}removeAppendedElements(){this.appendTo&&(this.appendTo==="body"?this.containerViewChild&&this.renderer.removeChild(this.document.body,this.containerViewChild.nativeElement):u.removeChild(this.containerViewChild.nativeElement,this.appendTo))}ngOnDestroy(){this.unbindGlobalListeners(),this.unbindTriggerEventListener(),this.removeAppendedElements()}static \u0275fac=function(t){return new(t||n)(f(Y),f(pe),f(Z),f(j),f(Q),f(Se),f(Te))};static \u0275cmp=G({type:n,selectors:[["p-contextMenu"]],contentQueries:function(t,i,s){if(t&1&&xe(s,Le,4),t&2){let a;F(a=K())&&(i.templates=a)}},viewQuery:function(t,i){if(t&1&&(z(mt,5),z(ut,5)),t&2){let s;F(s=K())&&(i.rootmenu=s.first),F(s=K())&&(i.containerViewChild=s.first)}},hostAttrs:[1,"p-element"],inputs:{model:"model",triggerEvent:"triggerEvent",target:"target",global:"global",style:"style",styleClass:"styleClass",appendTo:"appendTo",autoZIndex:"autoZIndex",baseZIndex:"baseZIndex",id:"id",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",pressDelay:"pressDelay"},outputs:{onShow:"onShow",onHide:"onHide"},decls:1,vars:1,consts:[[3,"ngClass","class","ngStyle",4,"ngIf"],[3,"ngClass","ngStyle"],["container",""],[3,"root","items","itemTemplate","menuId","tabindex","ariaLabel","ariaLabelledBy","baseZIndex","autoZIndex","visible","focusedItemId","activeItemPath","itemClick","menuFocus","menuBlur","menuKeydown","itemMouseEnter"],["rootmenu",""]],template:function(t,i){t&1&&h(0,_t,4,22,"div",0),t&2&&r("ngIf",i.visible())},dependencies:[J,ee,te,ht],styles:[`@layer primeng{.p-contextmenu{position:absolute}.p-contextmenu ul{margin:0;padding:0;list-style:none}.p-contextmenu .p-submenu-list{position:absolute;min-width:100%;z-index:1}.p-contextmenu .p-menuitem-link{cursor:pointer;display:flex;align-items:center;text-decoration:none;overflow:hidden;position:relative}.p-contextmenu .p-menuitem-text{line-height:1}.p-contextmenu .p-menuitem{position:relative}.p-contextmenu .p-menuitem-link .p-submenu-icon:not(svg){margin-left:auto}.p-contextmenu .p-menuitem-link .p-icon-wrapper{margin-left:auto}}
`],encapsulation:2,data:{animation:[ne("overlayAnimation",[D(":enter",[O({opacity:0}),se("250ms")]),D(":leave",[se(".1s linear",O({opacity:0}))])])]},changeDetection:0})}return n})(),Bt=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=de({type:n});static \u0275inj=ue({imports:[ve,ie,Pe,le,ae,re,ie,le,re]})}return n})();export{It as a,Bt as b};
